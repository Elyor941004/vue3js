
import ChartMaker from '../factory/gbasechart';

import * as DataManager from '../echart/echartData';
import BarChart from '../echart/barChart';
import ColumnChart from '../echart/columnChart';
import LineChart from '../echart/lineChart';
import AreaChart from '../echart/areaChart';
import GenreMaker from '../echart/genreMaker';

var EChart = class EChart extends ChartMaker {

    draw = function(state){
        $("#container").html("");
        this.propsToVO(state.props);
        this.chart =  this.createChartByGenre(state.chartInfo);
        this.setChartProperties();
    }

    setTitle = function(title){
        this.title = title;
        if(this.chart != "")
        {
          this.chart.setOption({title : {text : title}});
        }

    }

    propsToVO = function(props){
        this.title = props.title.value;
    }

    createChartByGenre = function(chartInfo){
        var genre = chartInfo.chart.genre;
        var subGenre = chartInfo.subChart.genre;
        return GenreMaker.factory(genre).getChart(subGenre,"");
    }

    setChartProperties = function(props){
        this.setTitle(this.title);
    }
};

ChartMaker.EChart = EChart;

export var EChart;
